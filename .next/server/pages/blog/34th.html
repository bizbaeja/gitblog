<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>How to use Atom with Recoil</title><meta content="TIL / TypeScript" name="description"/><meta property="og:site_name" content="Bizbaeja"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/90f5bc7ed5481af4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/90f5bc7ed5481af4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-164920eac96bc1c7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f6e1d36fb7693025.js" defer=""></script><script src="/_next/static/chunks/247-fc9df32bb962ad35.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-e0f7f7d774079ee3.js" defer=""></script><script src="/_next/static/xLDZNyWmzn6o3OpXpUoeC/_buildManifest.js" defer=""></script><script src="/_next/static/xLDZNyWmzn6o3OpXpUoeC/_ssgManifest.js" defer=""></script><script src="/_next/static/xLDZNyWmzn6o3OpXpUoeC/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="w-full flex flex-col items-center p-3"><header class="w-full max-w-3xl flex flex-row justify-between items-center my-1"><div class="flex flex-row items-center"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="로고" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="로고" srcSet="/_next/image?url=%2Fsherlock.jpeg&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fsherlock.jpeg&amp;w=96&amp;q=75 2x" src="/_next/image?url=%2Fsherlock.jpeg&amp;w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" class="rounded-full" loading="lazy"/></noscript></span><span class="mx-2 font-extralight text-lg">Bizbaeja&#x27;s Blog</span></div><nav><a class="mr-5 " href="/">Home</a><a class="mr-5 " href="/blog">Blog</a><a class="mr-5 " href="/snack">TIL</a></nav></header><main class="w-full max-w-3xl"><div class="mt-10 prose"><h1 class="text-sky-700">How to use Atom with Recoil</h1><h3>요구사항</h3>
<hr/>
<ol>
<li>key : 유일해야한다</li>
<li>default :</li>
</ol>
<hr/>
<pre><code class="language-tsx">import { atom } from &#x27;recoil&#x27;;

export const isDarkAtom = atom({
  key: &#x27;isDark&#x27;,
  default: false
});
</code></pre>
<p>[screen/atom.ts]</p>
<h3>App(연결하고자 하는 컴포넌트) 와 Chart 를 atom 과 연결하기</h3>
<hr/>
<ul>
<li>app으로 와서 useRecoilValue 라는 function 을 사용한다.</li>
</ul>
<pre><code class="language-tsx">import React from &#x27;react&#x27;;
import ReactDOM from &#x27;react-dom/client&#x27;;
import App from &#x27;./App&#x27;;

import { QueryClient, QueryClientProvider } from &#x27;@tanstack/react-query&#x27;;
import { ThemeProvider } from &#x27;styled-components&#x27;;
import GlobalStyles from &#x27;./global&#x27;;
import { darkTheme, lightTheme } from &#x27;./theme&#x27;;
import { RecoilRoot } from &#x27;recoil&#x27;;
import isDark from &#x27;./App&#x27;;
import { isDarkAtom } from &#x27;./screens/atoms&#x27;;

const queryClient = new QueryClient();
const root = ReactDOM.createRoot(
  document.getElementById(&#x27;root&#x27;) as HTMLElement
);

root.render(
  &lt;React.StrictMode&gt;
    &lt;RecoilRoot&gt;
      &lt;QueryClientProvider client={queryClient}&gt;
        &lt;ThemeProvider theme={isDark(isDarkAtom) ? darkTheme : lightTheme}&gt;
          &lt;GlobalStyles /&gt;
          &lt;App&gt;&lt;/App&gt;
        &lt;/ThemeProvider&gt;
      &lt;/QueryClientProvider&gt;
    &lt;/RecoilRoot&gt;
  &lt;/React.StrictMode&gt;
);
</code></pre>
<h3>atom.ts 생성</h3>
<hr/>
<pre><code class="language-tsx">import { atom } from &#x27;recoil&#x27;;

export const isDarkAtom = atom({
  key: &#x27;isDark&#x27;,
  default: true
});
</code></pre>
<h3>연결할 컴포넌트에 직접 연결</h3>
<hr/>
<pre><code class="language-tsx">import { useQuery } from &#x27;@tanstack/react-query&#x27;;
import { fetchCoinHistory } from &#x27;../api&#x27;;
import ApexChart from &#x27;react-apexcharts&#x27;;
import { useOutletContext } from &#x27;react-router&#x27;;
import { useRecoilValue } from &#x27;recoil&#x27;;
import { isDarkAtom } from &#x27;./atoms&#x27;;

interface IHistorical {
  time_open: number;
  time_close: number;
  open: string;
  high: string;
  low: string;
  close: string;
  volume: string;
  market_cap: number;
}
interface ChartProps {
  coinId: string;
}
function Chart() {
  const { coinId } = useOutletContext&lt;ChartProps&gt;();
  const { isLoading, data } = useQuery&lt;IHistorical[]&gt;([&#x27;ohlcv&#x27;, coinId], () =&gt;
    fetchCoinHistory(coinId)
  );
  const isDark = useRecoilValue(isDarkAtom);
  var ChartOptions = {
    chart: {
      type: &#x27;line&#x27;,
      height: 300,
      width: 500,
      toolbar: {
        show: false
      },
      background: &#x27;transparent&#x27;
    },
    series: [
      {
        name: &#x27;price&#x27;,
        data: data?.map((price) =&gt; Number(price.close)) as number[]
      }
    ],
    grid: { show: false },
    stroke: {
      curve: &#x27;smooth&#x27;,
      width: 3
    },
    yaxis: {
      show: false
    },
    xaxis: {
      axisBorder: { show: false },
      axisTicks: { show: false },
      labels: { show: false },
      type: &#x27;datetime&#x27;,
      categories: data?.map((price) =&gt; price.time_close * 1000) as number[]
    },
    fill: {
      type: &#x27;gradient&#x27;,
      gradient: { gradientToColors: [&#x27;#42f5ad&#x27;], stops: [0, 100] }
    },
    colors: [&#x27;#f3ffad&#x27;]
  };

  return (
    &lt;div&gt;
      {isLoading ? (
        &#x27;Loading chart...&#x27;
      ) : (
        &lt;ApexChart chart={ChartOptions.chart} series={ChartOptions.series} /&gt;
      )}
    &lt;/div&gt;
  );
}
export default Chart;
</code></pre></div></main><footer class="w p-3">만든이 : 배자현</footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"How to use Atom with Recoil","date":"2022-12-21T00:00:00.000Z","description":"TIL / TypeScript","body":{"raw":"\n### 요구사항\n\n---\n\n1. key : 유일해야한다\n2. default :\n\n---\n\n```tsx\nimport { atom } from 'recoil';\n\nexport const isDarkAtom = atom({\n  key: 'isDark',\n  default: false\n});\n```\n\n[screen/atom.ts]\n\n### App(연결하고자 하는 컴포넌트) 와 Chart 를 atom 과 연결하기\n\n---\n\n- app으로 와서 useRecoilValue 라는 function 을 사용한다.\n\n```tsx\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ThemeProvider } from 'styled-components';\nimport GlobalStyles from './global';\nimport { darkTheme, lightTheme } from './theme';\nimport { RecoilRoot } from 'recoil';\nimport isDark from './App';\nimport { isDarkAtom } from './screens/atoms';\n\nconst queryClient = new QueryClient();\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  \u003cReact.StrictMode\u003e\n    \u003cRecoilRoot\u003e\n      \u003cQueryClientProvider client={queryClient}\u003e\n        \u003cThemeProvider theme={isDark(isDarkAtom) ? darkTheme : lightTheme}\u003e\n          \u003cGlobalStyles /\u003e\n          \u003cApp\u003e\u003c/App\u003e\n        \u003c/ThemeProvider\u003e\n      \u003c/QueryClientProvider\u003e\n    \u003c/RecoilRoot\u003e\n  \u003c/React.StrictMode\u003e\n);\n```\n\n### atom.ts 생성\n\n---\n\n```tsx\nimport { atom } from 'recoil';\n\nexport const isDarkAtom = atom({\n  key: 'isDark',\n  default: true\n});\n```\n\n### 연결할 컴포넌트에 직접 연결\n\n---\n\n```tsx\nimport { useQuery } from '@tanstack/react-query';\nimport { fetchCoinHistory } from '../api';\nimport ApexChart from 'react-apexcharts';\nimport { useOutletContext } from 'react-router';\nimport { useRecoilValue } from 'recoil';\nimport { isDarkAtom } from './atoms';\n\ninterface IHistorical {\n  time_open: number;\n  time_close: number;\n  open: string;\n  high: string;\n  low: string;\n  close: string;\n  volume: string;\n  market_cap: number;\n}\ninterface ChartProps {\n  coinId: string;\n}\nfunction Chart() {\n  const { coinId } = useOutletContext\u003cChartProps\u003e();\n  const { isLoading, data } = useQuery\u003cIHistorical[]\u003e(['ohlcv', coinId], () =\u003e\n    fetchCoinHistory(coinId)\n  );\n  const isDark = useRecoilValue(isDarkAtom);\n  var ChartOptions = {\n    chart: {\n      type: 'line',\n      height: 300,\n      width: 500,\n      toolbar: {\n        show: false\n      },\n      background: 'transparent'\n    },\n    series: [\n      {\n        name: 'price',\n        data: data?.map((price) =\u003e Number(price.close)) as number[]\n      }\n    ],\n    grid: { show: false },\n    stroke: {\n      curve: 'smooth',\n      width: 3\n    },\n    yaxis: {\n      show: false\n    },\n    xaxis: {\n      axisBorder: { show: false },\n      axisTicks: { show: false },\n      labels: { show: false },\n      type: 'datetime',\n      categories: data?.map((price) =\u003e price.time_close * 1000) as number[]\n    },\n    fill: {\n      type: 'gradient',\n      gradient: { gradientToColors: ['#42f5ad'], stops: [0, 100] }\n    },\n    colors: ['#f3ffad']\n  };\n\n  return (\n    \u003cdiv\u003e\n      {isLoading ? (\n        'Loading chart...'\n      ) : (\n        \u003cApexChart chart={ChartOptions.chart} series={ChartOptions.series} /\u003e\n      )}\n    \u003c/div\u003e\n  );\n}\nexport default Chart;\n```\n","code":"var Component=(()=\u003e{var h=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(t,n)=\u003e()=\u003e(n||t((n={exports:{}}).exports,n),n.exports),x=(t,n)=\u003e{for(var r in n)i(t,r,{get:n[r],enumerable:!0})},s=(t,n,r,a)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let o of d(n))!f.call(t,o)\u0026\u0026o!==r\u0026\u0026i(t,o,{get:()=\u003en[o],enumerable:!(a=p(n,o))||a.enumerable});return t};var y=(t,n,r)=\u003e(r=t!=null?h(u(t)):{},s(n||!t||!t.__esModule?i(r,\"default\",{value:t,enumerable:!0}):r,t)),C=t=\u003es(i({},\"__esModule\",{value:!0}),t);var l=g((w,c)=\u003e{c.exports=_jsx_runtime});var A={};x(A,{default:()=\u003eR,frontmatter:()=\u003ek});var e=y(l()),k={title:\"How to use Atom with Recoil\",date:new Date(16715808e5),description:\"TIL / TypeScript\"};function m(t){let n=Object.assign({h3:\"h3\",hr:\"hr\",ol:\"ol\",li:\"li\",pre:\"pre\",code:\"code\",p:\"p\",ul:\"ul\"},t.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h3,{children:\"\\uC694\\uAD6C\\uC0AC\\uD56D\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"key : \\uC720\\uC77C\\uD574\\uC57C\\uD55C\\uB2E4\"}),`\n`,(0,e.jsx)(n.li,{children:\"default :\"}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-tsx\",children:`import { atom } from 'recoil';\n\nexport const isDarkAtom = atom({\n  key: 'isDark',\n  default: false\n});\n`})}),`\n`,(0,e.jsx)(n.p,{children:\"[screen/atom.ts]\"}),`\n`,(0,e.jsx)(n.h3,{children:\"App(\\uC5F0\\uACB0\\uD558\\uACE0\\uC790 \\uD558\\uB294 \\uCEF4\\uD3EC\\uB10C\\uD2B8) \\uC640 Chart \\uB97C atom \\uACFC \\uC5F0\\uACB0\\uD558\\uAE30\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"app\\uC73C\\uB85C \\uC640\\uC11C useRecoilValue \\uB77C\\uB294 function \\uC744 \\uC0AC\\uC6A9\\uD55C\\uB2E4.\"}),`\n`]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-tsx\",children:`import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\n\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ThemeProvider } from 'styled-components';\nimport GlobalStyles from './global';\nimport { darkTheme, lightTheme } from './theme';\nimport { RecoilRoot } from 'recoil';\nimport isDark from './App';\nimport { isDarkAtom } from './screens/atoms';\n\nconst queryClient = new QueryClient();\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  \u003cReact.StrictMode\u003e\n    \u003cRecoilRoot\u003e\n      \u003cQueryClientProvider client={queryClient}\u003e\n        \u003cThemeProvider theme={isDark(isDarkAtom) ? darkTheme : lightTheme}\u003e\n          \u003cGlobalStyles /\u003e\n          \u003cApp\u003e\u003c/App\u003e\n        \u003c/ThemeProvider\u003e\n      \u003c/QueryClientProvider\u003e\n    \u003c/RecoilRoot\u003e\n  \u003c/React.StrictMode\u003e\n);\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"atom.ts \\uC0DD\\uC131\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-tsx\",children:`import { atom } from 'recoil';\n\nexport const isDarkAtom = atom({\n  key: 'isDark',\n  default: true\n});\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uC5F0\\uACB0\\uD560 \\uCEF4\\uD3EC\\uB10C\\uD2B8\\uC5D0 \\uC9C1\\uC811 \\uC5F0\\uACB0\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-tsx\",children:`import { useQuery } from '@tanstack/react-query';\nimport { fetchCoinHistory } from '../api';\nimport ApexChart from 'react-apexcharts';\nimport { useOutletContext } from 'react-router';\nimport { useRecoilValue } from 'recoil';\nimport { isDarkAtom } from './atoms';\n\ninterface IHistorical {\n  time_open: number;\n  time_close: number;\n  open: string;\n  high: string;\n  low: string;\n  close: string;\n  volume: string;\n  market_cap: number;\n}\ninterface ChartProps {\n  coinId: string;\n}\nfunction Chart() {\n  const { coinId } = useOutletContext\u003cChartProps\u003e();\n  const { isLoading, data } = useQuery\u003cIHistorical[]\u003e(['ohlcv', coinId], () =\u003e\n    fetchCoinHistory(coinId)\n  );\n  const isDark = useRecoilValue(isDarkAtom);\n  var ChartOptions = {\n    chart: {\n      type: 'line',\n      height: 300,\n      width: 500,\n      toolbar: {\n        show: false\n      },\n      background: 'transparent'\n    },\n    series: [\n      {\n        name: 'price',\n        data: data?.map((price) =\u003e Number(price.close)) as number[]\n      }\n    ],\n    grid: { show: false },\n    stroke: {\n      curve: 'smooth',\n      width: 3\n    },\n    yaxis: {\n      show: false\n    },\n    xaxis: {\n      axisBorder: { show: false },\n      axisTicks: { show: false },\n      labels: { show: false },\n      type: 'datetime',\n      categories: data?.map((price) =\u003e price.time_close * 1000) as number[]\n    },\n    fill: {\n      type: 'gradient',\n      gradient: { gradientToColors: ['#42f5ad'], stops: [0, 100] }\n    },\n    colors: ['#f3ffad']\n  };\n\n  return (\n    \u003cdiv\u003e\n      {isLoading ? (\n        'Loading chart...'\n      ) : (\n        \u003cApexChart chart={ChartOptions.chart} series={ChartOptions.series} /\u003e\n      )}\n    \u003c/div\u003e\n  );\n}\nexport default Chart;\n`})})]})}function D(t={}){let{wrapper:n}=t.components||{};return n?(0,e.jsx)(n,Object.assign({},t,{children:(0,e.jsx)(m,t)})):m(t)}var R=D;return C(A);})();\n;return Component;"},"_id":"34th.mdx","_raw":{"sourceFilePath":"34th.mdx","sourceFileName":"34th.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"34th"},"type":"Post"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"34th"},"buildId":"xLDZNyWmzn6o3OpXpUoeC","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
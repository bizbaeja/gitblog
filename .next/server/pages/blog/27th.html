<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>React-query</title><meta content="TIL" name="description"/><meta property="og:site_name" content="Bizbaeja"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/8bc99b6f84641c27.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8bc99b6f84641c27.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/_next/static/chunks/main-164920eac96bc1c7.js" defer=""></script><script src="/_next/static/chunks/pages/_app-f6e1d36fb7693025.js" defer=""></script><script src="/_next/static/chunks/247-fc9df32bb962ad35.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-9e079fadb1cb3b18.js" defer=""></script><script src="/_next/static/ubUi1wMd3WyILvzRHiAaV/_buildManifest.js" defer=""></script><script src="/_next/static/ubUi1wMd3WyILvzRHiAaV/_ssgManifest.js" defer=""></script><script src="/_next/static/ubUi1wMd3WyILvzRHiAaV/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="w-full flex flex-col items-center p-3"><header class="w-full max-w-3xl flex flex-row justify-between items-center my-1"><div class="flex flex-row items-center"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2740%27%20height=%2740%27/%3e"/></span><img alt="로고" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="rounded-full" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="로고" srcSet="/_next/image?url=%2Fsherlock.jpeg&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fsherlock.jpeg&amp;w=96&amp;q=75 2x" src="/_next/image?url=%2Fsherlock.jpeg&amp;w=96&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" class="rounded-full" loading="lazy"/></noscript></span><span class="mx-2 font-extralight text-lg">Bizbaeja&#x27;s Blog</span></div><nav><a class="mr-5" href="/">Home</a><a class="mr-5" href="/blog">Blog</a><a class="mr-5" href="/snack">TIL</a></nav></header><main class="w-full max-w-3xl"><div class="mt-10 prose"><h1 class="text-sky-700">React-query</h1><pre><code class="language-tsx">index.tsx;
import { QueryClient, QueryClientProvider } from &#x27;react-query&#x27;;
const queryClient = new QueryClient();

const root = ReactDOM.createRoot(
  document.getElementById(&#x27;root&#x27;) as HTMLElement
);

root.render(
  &lt;QueryClientProvider client={queryClient}&gt;
    &lt;ThemeProvider theme={theme}&gt;
      &lt;GlobalStyles /&gt;
      &lt;React.StrictMode&gt;
        &lt;App&gt;&lt;/App&gt;
      &lt;/React.StrictMode&gt;
    &lt;/ThemeProvider&gt;
  &lt;/QueryClientProvider&gt;
);
</code></pre>
<ul>
<li>역할 : 우리 스스로 실행하고 있었던 로직들을 축약해준다.</li>
</ul>
<ol>
<li>fetcher 함수 만들기 (api.tsx 파일을 만들어 그 안에 넣는다) fetcher 함수는 꼭 fetch promiser return 해줘야한다.</li>
</ol>
<pre><code class="language-tsx">export function fetchCoins() {
  return fetch(&#x27;https://api.coinpaprika.com/vi/com&#x27;).then((response) =&gt;
    response.json()
  );
}
</code></pre>
<ol>
<li>fetch then reponse 를 가져와서 response.json 을 return 해준다. fetcher 함수 fetchCoin은 URL 을 부르고 그 URL 로부타 json 을 return 한다.</li>
</ol>
<p>coin.tsx</p>
<p>첫번째 인자 allCoins 는 고유식별자 두번째 인자는 fetcher function (api.tsx 의 fetchCoins)</p>
<p>useQuery 는 isLoadiing 이라는 boolean 값을 return 한다.</p>
<pre><code class="language-tsx">
unction Coins() {
  useQuery(&quot;allCoins&quot;,fetchCoins)
  // const [coins, setCoins] = useState&lt;CoinInterface[]&gt;([]);
  // const [loading, setLoading] = useState(true);

  // useEffect(() =&gt; {
  //   (async () =&gt; {
  //     const response = await fetch(&quot;https://api.coinpaprika.com/v1/coins&quot;);
  //     const json = await response.json();
  //     setCoins(json.slice(1, 100));
  //     setLoading(false);
  //     console.log(coins);
  //   })();
  // }, []);
  return (
</code></pre></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"React-query","date":"2022-12-13T00:00:00.000Z","description":"TIL","body":{"raw":"\n```tsx\nindex.tsx;\nimport { QueryClient, QueryClientProvider } from 'react-query';\nconst queryClient = new QueryClient();\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  \u003cQueryClientProvider client={queryClient}\u003e\n    \u003cThemeProvider theme={theme}\u003e\n      \u003cGlobalStyles /\u003e\n      \u003cReact.StrictMode\u003e\n        \u003cApp\u003e\u003c/App\u003e\n      \u003c/React.StrictMode\u003e\n    \u003c/ThemeProvider\u003e\n  \u003c/QueryClientProvider\u003e\n);\n```\n\n- 역할 : 우리 스스로 실행하고 있었던 로직들을 축약해준다.\n\n1. fetcher 함수 만들기 (api.tsx 파일을 만들어 그 안에 넣는다) fetcher 함수는 꼭 fetch promiser return 해줘야한다.\n\n```tsx\nexport function fetchCoins() {\n  return fetch('https://api.coinpaprika.com/vi/com').then((response) =\u003e\n    response.json()\n  );\n}\n```\n\n1. fetch then reponse 를 가져와서 response.json 을 return 해준다. fetcher 함수 fetchCoin은 URL 을 부르고 그 URL 로부타 json 을 return 한다.\n\ncoin.tsx\n\n첫번째 인자 allCoins 는 고유식별자 두번째 인자는 fetcher function (api.tsx 의 fetchCoins)\n\nuseQuery 는 isLoadiing 이라는 boolean 값을 return 한다.\n\n```tsx\n\nunction Coins() {\n  useQuery(\"allCoins\",fetchCoins)\n  // const [coins, setCoins] = useState\u003cCoinInterface[]\u003e([]);\n  // const [loading, setLoading] = useState(true);\n\n  // useEffect(() =\u003e {\n  //   (async () =\u003e {\n  //     const response = await fetch(\"https://api.coinpaprika.com/v1/coins\");\n  //     const json = await response.json();\n  //     setCoins(json.slice(1, 100));\n  //     setLoading(false);\n  //     console.log(coins);\n  //   })();\n  // }, []);\n  return (\n```\n","code":"var Component=(()=\u003e{var u=Object.create;var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var C=(e,n)=\u003e()=\u003e(n||e((n={exports:{}}).exports,n),n.exports),x=(e,n)=\u003e{for(var r in n)s(e,r,{get:n[r],enumerable:!0})},c=(e,n,r,i)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let o of p(n))!f.call(e,o)\u0026\u0026o!==r\u0026\u0026s(e,o,{get:()=\u003en[o],enumerable:!(i=h(n,o))||i.enumerable});return e};var g=(e,n,r)=\u003e(r=e!=null?u(m(e)):{},c(n||!e||!e.__esModule?s(r,\"default\",{value:e,enumerable:!0}):r,e)),y=e=\u003ec(s({},\"__esModule\",{value:!0}),e);var a=C((R,l)=\u003e{l.exports=_jsx_runtime});var M={};x(M,{default:()=\u003ev,frontmatter:()=\u003ej});var t=g(a()),j={title:\"React-query\",date:new Date(16708896e5),description:\"TIL\"};function d(e){let n=Object.assign({pre:\"pre\",code:\"code\",ul:\"ul\",li:\"li\",ol:\"ol\",p:\"p\"},e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:\"language-tsx\",children:`index.tsx;\nimport { QueryClient, QueryClientProvider } from 'react-query';\nconst queryClient = new QueryClient();\n\nconst root = ReactDOM.createRoot(\n  document.getElementById('root') as HTMLElement\n);\n\nroot.render(\n  \u003cQueryClientProvider client={queryClient}\u003e\n    \u003cThemeProvider theme={theme}\u003e\n      \u003cGlobalStyles /\u003e\n      \u003cReact.StrictMode\u003e\n        \u003cApp\u003e\u003c/App\u003e\n      \u003c/React.StrictMode\u003e\n    \u003c/ThemeProvider\u003e\n  \u003c/QueryClientProvider\u003e\n);\n`})}),`\n`,(0,t.jsxs)(n.ul,{children:[`\n`,(0,t.jsx)(n.li,{children:\"\\uC5ED\\uD560 : \\uC6B0\\uB9AC \\uC2A4\\uC2A4\\uB85C \\uC2E4\\uD589\\uD558\\uACE0 \\uC788\\uC5C8\\uB358 \\uB85C\\uC9C1\\uB4E4\\uC744 \\uCD95\\uC57D\\uD574\\uC900\\uB2E4.\"}),`\n`]}),`\n`,(0,t.jsxs)(n.ol,{children:[`\n`,(0,t.jsx)(n.li,{children:\"fetcher \\uD568\\uC218 \\uB9CC\\uB4E4\\uAE30 (api.tsx \\uD30C\\uC77C\\uC744 \\uB9CC\\uB4E4\\uC5B4 \\uADF8 \\uC548\\uC5D0 \\uB123\\uB294\\uB2E4) fetcher \\uD568\\uC218\\uB294 \\uAF2D fetch promiser return \\uD574\\uC918\\uC57C\\uD55C\\uB2E4.\"}),`\n`]}),`\n`,(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:\"language-tsx\",children:`export function fetchCoins() {\n  return fetch('https://api.coinpaprika.com/vi/com').then((response) =\u003e\n    response.json()\n  );\n}\n`})}),`\n`,(0,t.jsxs)(n.ol,{children:[`\n`,(0,t.jsx)(n.li,{children:\"fetch then reponse \\uB97C \\uAC00\\uC838\\uC640\\uC11C response.json \\uC744 return \\uD574\\uC900\\uB2E4. fetcher \\uD568\\uC218 fetchCoin\\uC740 URL \\uC744 \\uBD80\\uB974\\uACE0 \\uADF8 URL \\uB85C\\uBD80\\uD0C0 json \\uC744 return \\uD55C\\uB2E4.\"}),`\n`]}),`\n`,(0,t.jsx)(n.p,{children:\"coin.tsx\"}),`\n`,(0,t.jsx)(n.p,{children:\"\\uCCAB\\uBC88\\uC9F8 \\uC778\\uC790 allCoins \\uB294 \\uACE0\\uC720\\uC2DD\\uBCC4\\uC790 \\uB450\\uBC88\\uC9F8 \\uC778\\uC790\\uB294 fetcher function (api.tsx \\uC758 fetchCoins)\"}),`\n`,(0,t.jsx)(n.p,{children:\"useQuery \\uB294 isLoadiing \\uC774\\uB77C\\uB294 boolean \\uAC12\\uC744 return \\uD55C\\uB2E4.\"}),`\n`,(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:\"language-tsx\",children:`\nunction Coins() {\n  useQuery(\"allCoins\",fetchCoins)\n  // const [coins, setCoins] = useState\u003cCoinInterface[]\u003e([]);\n  // const [loading, setLoading] = useState(true);\n\n  // useEffect(() =\u003e {\n  //   (async () =\u003e {\n  //     const response = await fetch(\"https://api.coinpaprika.com/v1/coins\");\n  //     const json = await response.json();\n  //     setCoins(json.slice(1, 100));\n  //     setLoading(false);\n  //     console.log(coins);\n  //   })();\n  // }, []);\n  return (\n`})})]})}function L(e={}){let{wrapper:n}=e.components||{};return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(d,e)})):d(e)}var v=L;return y(M);})();\n;return Component;"},"_id":"27th.mdx","_raw":{"sourceFilePath":"27th.mdx","sourceFileName":"27th.mdx","sourceFileDir":".","contentType":"mdx","flattenedPath":"27th"},"type":"Post"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"27th"},"buildId":"ubUi1wMd3WyILvzRHiAaV","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
---
title: TS ê³µë¶€ ë¸”ë¡œê·¸ì— ì ìš©í•˜ê¸°
date: 2024-01-26
description: ì¡°ê¸ˆì”© ëŠ˜ì–´ê°€ëŠ” ì‹¤ë ¥!
---

#

![blog.png](/blog/ts/blog.png)

## 1. contentlayer.config.js ì¬ì„¤ì •

```jsx
// ê¸°ì¡´ ì½”ë“œ
export const allPosts = defineDocumentType(() => ({
  name: 'Posts',
  contentType: 'mdx',
  fields: {
    title: { type: 'string', required: true },
    date: { type: 'string', required: true },
    description: { type: 'string', required: false }
  }
}));

export default makeSource({
  contentDirPath: 'posts',
  documentTypes: [allPosts],
  mdx: {
    remarkPlugins: [],
    rehypePlugins: []
  }
});
```

```jsx
// ë°”ê¾¼ ì½”ë“œ
import { defineDocumentType, makeSource } from 'contentlayer/source-files';

export const blogPosts = defineDocumentType(() => ({
  name: 'blogPosts',
  contentType: 'mdx',
  filePathPattern: `_blog/**/*.mdx`, // '_blog' í´ë” ë‚´ì˜ mdx íŒŒì¼ ì°¸ì¡°
  fields: {
    title: { type: 'string', required: true },
    date: { type: 'string', required: true },
    description: { type: 'string', required: false }
  }
}));

export const tilPosts = defineDocumentType(() => ({
  name: 'tilPosts',
  contentType: 'mdx',
  filePathPattern: `_til/**/*.mdx`, // '_til' í´ë” ë‚´ì˜ mdx íŒŒì¼ ì°¸ì¡°
  fields: {
    title: { type: 'string', required: true },
    date: { type: 'string', required: true },
    description: { type: 'string', required: false }
  }
}));

export default makeSource({
  contentDirPath: 'posts', // ìƒìœ„ í´ë” 'posts' ì§€ì •
  documentTypes: [blogPosts, tilPosts],
  mdx: {
    remarkPlugins: [],
    rehypePlugins: []
  }
});
```

> ì„¤ëª…
> .`contentlayer` ì— `generated` í´ë”ì˜ í•˜ìœ„ í´ë”ë¡œ ë§Œë“¤ê³  ì‹¶ì€ ì½˜í…ì¸ ì˜ ê²½ë¡œë¥¼ ì„¤ì •í•´ì£¼ëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼. ê¸°ì¡´ì˜ `allPosts` ë¡œ ëª¨ë“  mdx íŒŒì¼ë“¤ì´ ë°˜í™˜ë˜ì—ˆë‹¤ë©´ ì½”ë“œë¥¼ ê³ ì¹œ í›„ì—ëŠ” `blogPosts` ì™€ `tilPosts` ë¡œ ê²½ë¡œê°€ ë‚˜ë‰˜ì–´ ê°ê° `filePathPattern` ì„ ì°¸ì¡°í•œ mdx íŒŒì¼ì„ ë°˜í™˜í•˜ê²Œ ëœë‹¤.
> ë‹¤ë§Œ, `makeSource` ì˜ `contentDirPath` ì—ëŠ” ìƒìœ„ í´ë”ë§Œ ì§€ì •í•´ì£¼ë©´ ëœë‹¤.

## 2. pages.ì˜ index.tsx ìƒì„±

![index.png](/blog/ts/index.png)

<aside>
ğŸ’¡ ê¸°ì¡´ì—ëŠ” allPosts ë¡œ ëª¨ë“  ê²Œì‹œë¬¼ë“¤ì´ ë³´ì—¬ì¡Œê¸° ë•Œë¬¸ì— index.tsx ë„ í•˜ë‚˜ë°–ì— í•„ìš”í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ì§€ê¸ˆì€ ë¼ìš°íŠ¸ë„ ë¶„ë¦¬ë˜ì—ˆê¸° ë•Œë¬¸ì—, ê° ë¼ìš°íŠ¸ ë³„ë¡œ  index.tsx ë¥¼ ìƒì„±í•´ì£¼ì—ˆë‹¤.
ê° í˜ì´ì§€ëŠ” ì•„ë˜ì˜ ì½”ë“œì™€ ê°™ì´ `â€˜contentlayerâ€™`ë¥¼ ì°¸ì¡°í•œë‹¤.

</aside>

```jsx
import type { NextPage } from 'next';
import BlogPost from 'components/BlogPost';
import Container from 'components/Container';
import { allBlogPosts } from 'contentlayer/generated';
import { InferGetStaticPropsType } from 'next';

const Blog = ({ blog }: InferGetStaticPropsType<typeof getStaticProps>) => {
  return (
    <Container>
      <div className={`mt-10 flex flex-col`}>
        {blog.map((blog) => (
          <BlogPost
            date={blog.date}
            title={blog.title}
            des={blog.description}
            blog={blog._raw.flattenedPath}
            key={blog._id}
          />
        ))}
      </div>
    </Container>
  );
};

export const getStaticProps = async () => {
  const blog = allBlogPosts.sort(
    (a, b) => Number(new Date(b.date)) - Number(new Date(a.date))
  );

  return {
    props: {
      blog
    }
  };
};

export default Blog;
```

## 3. trouble-shooting

<aside>
ğŸ’¡ ìœ„ì˜ ê³¼ì •ì„ ê±°ì¹œ í›„ `npm run dev` ë¥¼ ì¬ì‹¤í–‰ í•˜ì—¬ `contentslayer`  ì¬ìƒì„±ì„ ì‹œë„í–ˆì§€ë§Œ ì‹¤íŒ¨í•œ ì‚¬ë¡€

</aside>

```jsx
User
SyntaxError: /Users/aeong/Documents/NewAeong/gitblog/.next/server/pages-manifest.json: Unexpected non-whitespace character after JSON at position 217
This error happened while generating the page. Any console logs will be displayed in the terminal window.
```

### í•´ê²°ë°©ë²•

<aside>
ğŸ’¡ ê¸°ì¡´ì˜ ìºì‹œ ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ì—ëŸ¬ë¡œ, `.next` í´ë”ë¥¼ ì œê±°í•˜ê³  `npm run dev` ë¥¼ ì‹¤í–‰í•˜ë©´ ëœë‹¤.

</aside>
